version: 1.0
runtime: python311
build:
  commands:
    build:
      - python3 -m ensurepip --upgrade
      - python3 -m pip install -r requirements.txt
      - python3  manage.py makemigrations
      - python3  manage.py migrate
      - python3  manage.py collectstatic

run:
  runtime-version: 3.11.9
  pre-run:
    - python3 -m pip install -r requirements.txt
    - python3  manage.py makemigrations
    - python3  manage.py migrate
    - python3  manage.py collectstatic
    - which gunicorn
  command: gunicorn horilla.wsgi:application -b :8080 --timeout 120 --workers=20 --threads=20 --worker-connections=1000
  network:
    port: 8080
